const translations = {
    'es': {
        "title": "Alejandro Murillo Díaz - Desarrollador Junior",
        "name": "Alejandro Murillo Díaz",
        "nav_about": "Sobre Mí",
        "nav_skills": "Habilidades",
        "nav_projects": "Proyectos",
        "nav_experience": "Experiencia",
        "nav_certifications": "Certificaciones",
        "nav_contact": "Contacto",
        "hero_greeting": "Hola, soy",
        "hero_static_prefix": "Desarrollador Junior",
        "hero_subtitle": "Estudiante de TI en UPSIN Sinaloa | Java, C/C++, Kotlin, Web, Redes",
        "download_cv": "Descargar CV",
        "download_cv_photo": "Descargar CV con Foto",
        "view_projects": "Ver Proyectos",
        "about_title": "Sobre Mí",
        "about_text": "Soy estudiante de Tecnologías de la Información en UPSIN Sinaloa, cursando el 5.º Cuatrimestre, con enfoque en el Desarrollo de Software. A lo largo de mi formación academica he trabajado con diferentes proyectos usando lenguajes como Java, C/c++, HTML/CSS, con conocimineto básicos de redes haciendo diferentes prácticas de redes en Cisco Packet Tracer. Con cursos terminados de Cisco.",
        "skills_title": "Habilidades Técnicas",
        "skills_languages": "Lenguajes",
        "skills_frameworks": "Frameworks / Diseño",
        "skills_tools": "Herramientas / IDE's / Bases de Datos",
        "projects_title": "Proyectos Destacados",
        "proj_1_h3": "DapperDye - Asistente de ropa",
        "proj_2_h3": "Sitio web básico",
        "proj_3_h3": "Sitio web didactico sobre la materia programación móvil",
        "proj_4_h3": "Sitio web didactico de un laberinto",
        "proj_1_desc": "Sistema asesor de vestimenta. (Web para PC)",
        "tech_stack_1": "HTML5/CSS3, JavaScript, MySQL",
        "proj_2_desc": "Sitio sobre Charles Oliveira (Web para PC)",
        "tech_stack_2": "HTML5/CSS3",
        "proj_3_desc": "Sitio web de materia escolar",
        "proj_4_desc": "Laberinto",
        "view_project": "Ver",
        "experience_title": "Experiencia y Formación",
        "exp_1_title": "Estudiante TI Ingreso",
        "exp_1_desc": "Ingreso a UPSIN Sinaloa.",
        "exp_2_title": "Cursos Cisco",
        "exp_2_desc": "Módulos de redes, routing y fundamentos de linux.",
        "exp_3_title": "Estudiante TI. 2.º Cuatrimestre",
        "exp_3_desc": "Cursando en UPSIN el 2.º Cuatrimestre, trabajando con sistemas operativos, programación estructurada y conmutación y enrutamiento de redes, etc.",
        "exp_4_title": "Estudiante TI. 3.º Cuatrimestre",
        "exp_4_desc": "Cursando en UPSIN el 3.º Cuatrimestre, programacón orientada a objetos, base de datos, etc.",
        "exp_5_title": "Estudiante TI. 4.º Cuatrimestre",
        "exp_5_desc": "Cursando en UPSIN el 4.º Cuatrimestre, trabajando con aplicaciones web, estructura de datos, desarrollo de aplicaciones móviles, etc.",
        "exp_6_title": "Cursos de Cisco",
        "exp_6_desc": "Cisco Networking Academy, cursos de HTML/CSS, ciberseguridad y ciencia de datos.",
        "exp_7_title": "Estudiante TI. 5.º Cuatrimestre",
        "exp_7_desc": "Cursando en UPSIN el 5.º Cuatrimestre, trabajando con aplicaciones web orientadas a servicios, bases de datos avanzadas, estándares y métricas para el desarrollo de Software, etc.",
        "cert_title": "Certificaciones",
        "contact_title": "Contacto",
        "contact_institutional_title": "Correo Institucional",
        "contact_institutional_desc": "Correo oficial para asuntos universitarios.",
        "contact_institutional_email": "2024030451@upsin.edu.mx",
        "send_institutional_email": "Enviar Correo",
        "contact_personal_title": "Correo Profesional",
        "contact_personal_desc": "Para ofertas de trabajo o proyectos freelance.",
        "contact_personal_email": "alejandro.murillo.amd@gmail.com",
        "send_personal_email": "Enviar Correo",
        "contact_linkedin_title": "LinkedIn",
        "contact_linkedin_desc": "Conectemos para oportunidades profesionales.",
        "contact_linkedin_link": "",
        "contact_gitlab_title": "GitLab",
        "contact_gitlab_desc": "Revisa mis repositorios y contribuciones de código.",
        "contact_gitlab_link": "",
        "contact_github_title": "GitHub",
        "contact_github_desc": "Revisa mis repositorios y contribuciones de código.",
        "footer_rights": "Todos los derechos reservados.",
        "typed_words": ["Software", "Web", "Móvil"]
    },
    'en': {
        "title": "Alejandro Murillo Díaz - Junior Developer",
        "name": "Alejandro Murillo Díaz",
        "nav_about": "About Me",
        "nav_skills": "Skills",
        "nav_projects": "Projects",
        "nav_experience": "Experience",
        "nav_certifications": "Certifications",
        "nav_contact": "Contact",
        "hero_greeting": "Hi, I'm",
        "hero_static_prefix": "Junior Developer",
        "hero_subtitle": "IT Student at UPSIN Sinaloa | Java, C/C++, Kotlin, Web, Networking",
        "download_cv": "Download CV",
        "download_cv_photo": "Download CV with Photo",
        "view_projects": "View Projects",
        "about_title": "About Me",
        "about_text": "I am an Information Technology student at UPSIN Sinaloa, currently in the 5th trimester, with a focus on Software Development. Passionate about creating efficient, scalable, and secure solutions. Certified in CCNA and Linux.",
        "skills_title": "Technical Skills",
        "skills_languages": "Languages",
        "skills_frameworks": "Frameworks / Design",
        "skills_tools": "Tools / IDEs / Databases",
        "projects_title": "Featured Projects",
        "proj_1_h3": "DapperDye - Clothing Assistant",
        "proj_2_h3": "Basic Website",
        "proj_3_h3": "Didactic Website on Mobile Programming",
        "proj_4_h3": "Didactic Maze Website",
        "proj_1_desc": "Clothing advisor system. (Web for PC)",
        "tech_stack_1": "HTML5/CSS3, JavaScript, MySQL",
        "proj_2_desc": "Website about Charles Oliveira (Web for PC)",
        "tech_stack_2": "HTML5/CSS3",
        "proj_3_desc": "School subject website",
        "proj_4_desc": "Didactic maze",
        "view_project": "View",
        "experience_title": "Experience & Education",
        "exp_1_title": "IT Student Admission",
        "exp_1_desc": "Admission to UPSIN Sinaloa.",
        "exp_2_title": "Cisco Courses",
        "exp_2_desc": "Modules on networking, routing, and Linux fundamentals.",
        "exp_3_title": "IT Student. 2nd Period (4 Months)",
        "exp_3_desc": "Currently in the 2nd Period at UPSIN, working with operating systems, structured programming, and network switching/routing, etc.",
        "exp_4_title": "IT Student. 3rd Period (4 Months)",
        "exp_4_desc": "Currently in the 3rd Period at UPSIN, focusing on object-oriented programming, databases, etc.",
        "exp_5_title": "IT Student. 4th Period (4 Months)",
        "exp_5_desc": "Currently in the 4th Period at UPSIN, working with web applications, data structures, mobile application development, etc.",
        "exp_6_title": "Cisco Courses",
        "exp_6_desc": "Cisco Networking Academy courses in HTML/CSS, cybersecurity, and data science.",
        "exp_7_title": "IT Student. 5th Period (4 Months)",
        "exp_7_desc": "Currently in the 5th Period at UPSIN, working with service-oriented web applications, advanced databases, standards and metrics for Software Development, etc.",
        "cert_title": "Certifications",
        "contact_title": "Contact",
        "contact_institutional_title": "Institutional Email",
        "contact_institutional_desc": "Official email for university matters.",
        "contact_institutional_email": "2024030451@upsin.edu.mx",
        "send_institutional_email": "Send Email",
        "contact_personal_title": "Professional Email",
        "contact_personal_desc": "For job offers or freelance projects.",
        "contact_personal_email": "alejandro.murillo.amd@gmail.com",
        "send_personal_email": "Send Email",
        "contact_linkedin_title": "LinkedIn",
        "contact_linkedin_desc": "Let's connect for professional opportunities.",
        "contact_linkedin_link": "",
        "contact_gitlab_title": "GitLab",
        "contact_gitlab_desc": "Check my repositories and code contributions.",
        "contact_gitlab_link": "",
        "contact_github_title": "GitHub",
        "contact_github_desc": "Check my repositories and code contributions.",
        "footer_rights": "All rights reserved.",
        "typed_words": ["Software", "Web", "Mobile"]
    },
    'fr': {
        "title": "Alejandro Murillo Díaz - Développeur Junior",
        "name": "Alejandro Murillo Díaz",
        "nav_about": "À propos",
        "nav_skills": "Compétences",
        "nav_projects": "Projets",
        "nav_experience": "Expérience",
        "nav_certifications": "Certifications",
        "nav_contact": "Contact",
        "hero_greeting": "Salut, je suis",
        "hero_static_prefix": "Développeur Junior",
        "hero_subtitle": "Étudiant en TI à UPSIN Sinaloa | Java, C/C++, Kotlin, Web, Réseaux",
        "download_cv": "Télécharger CV",
        "download_cv_photo": "Télécharger CV avec Photo",
        "view_projects": "Voir Projets",
        "about_title": "À propos de moi",
        "about_text": "Je suis étudiant en Technologies de l'Information à UPSIN Sinaloa, en 5e trimestre, avec un focus sur le Développement Logiciel. Passionné par la création de solutions efficaces, évolutives et sécurisées. Certifié CCNA et Linux.",
        "skills_title": "Compétences Techniques",
        "skills_languages": "Langages",
        "skills_frameworks": "Frameworks / Design",
        "skills_tools": "Outils / IDEs / Bases de Données",
        "projects_title": "Projets en vedette",
        "proj_1_h3": "DapperDye - Conseiller Vestimentaire",
        "proj_2_h3": "Site web basique",
        "proj_3_h3": "Site web didactique sur la programmation mobile",
        "proj_4_h3": "Site web didactique d'un labyrinthe",
        "proj_1_desc": "Système de conseil vestimentaire. (Web pour PC)",
        "tech_stack_1": "HTML5/CSS3, JavaScript, MySQL",
        "proj_2_desc": "Site web sur Charles Oliveira (Web pour PC)",
        "tech_stack_2": "HTML5/CSS3",
        "proj_3_desc": "Site web pour matière scolaire",
        "proj_4_desc": "Labyrinthe didactique",
        "view_project": "Voir",
        "experience_title": "Expérience et Formation",
        "exp_1_title": "Admission Étudiant TI",
        "exp_1_desc": "Admission à UPSIN Sinaloa.",
        "exp_2_title": "Cours Cisco",
        "exp_2_desc": "Modules sur les réseaux, le routage et les fondamentaux Linux.",
        "exp_3_title": "Étudiant TI. 2e Période (4 Mois)",
        "exp_3_desc": "Actuellement à la 2e Période à UPSIN, travaillant sur les systèmes d'exploitation, la programmation structurée et la commutation/routage de réseaux, etc.",
        "exp_4_title": "Étudiant TI. 3e Période (4 Mois)",
        "exp_4_desc": "Actuellement à la 3e Période à UPSIN, axé sur la programmation orientée objet, les bases de données, etc.",
        "exp_5_title": "Étudiant TI. 4e Période (4 Mois)",
        "exp_5_desc": "Actualmente a la 4e Période à UPSIN, travaillant sur les applications web, les structures de données, le développement d'applications mobiles, etc.",
        "exp_6_title": "Cours Cisco",
        "exp_6_desc": "Cisco Networking Academy courses in HTML/CSS, cybersécurité y science des données.",
        "exp_7_title": "Étudiant TI. 5e Période (4 Mois)",
        "exp_7_desc": "Actuellement à la 5e Période à UPSIN, travaillant sur les applications web orientées services, les bases de données avancées, les normes et métriques pour le développement logiciel, etc.",
        "cert_title": "Certifications",
        "contact_title": "Contact",
        "contact_institutional_title": "Courriel Institutionnel",
        "contact_institutional_desc": "Courriel officiel pour les affaires universitaires.",
        "contact_institutional_email": "2024030451@upsin.edu.mx",
        "send_institutional_email": "Envoyer Courriel",
        "contact_personal_title": "Courriel Professionnel",
        "contact_personal_desc": "Pour les offres d'emploi ou les projets freelance.",
        "contact_personal_email": "alejandro.murillo.amd@gmail.com",
        "send_personal_email": "Envoyer Courriel",
        "contact_linkedin_title": "LinkedIn",
        "contact_linkedin_desc": "Connectons-nous pour des opportunités professionnelles.",
        "contact_linkedin_link": "",
        "contact_gitlab_title": "GitLab",
        "contact_gitlab_desc": "Consultez mes dépôts et contributions de code.",
        "contact_gitlab_link": "",
        "contact_github_title": "GitHub",
        "contact_github_desc": "Consultez mes dépôts et contributions de code.",
        "footer_rights": "Tous droits réservés.",
        "typed_words": ["Logiciel", "Web", "Mobile"]
    }
};

let currentLang = 'es';
let typedWords = [];
let wordIndex = 0;
let charIndex = 0;
let isDeleting = false;
const typedTextElement = document.querySelector('.typed-text');
const typingSpeed = 100;
const pauseBetweenWords = 2000;
let typeWriterTimeout;

function setLanguage(lang) {
    const data = translations[lang];
    if (!data) return;
    document.querySelectorAll('[data-key]').forEach(element => {
        const key = element.getAttribute('data-key');
        if (data[key] !== undefined) {
            if (element.tagName === 'TITLE') {
                document.title = data[key];
            } else if (element.tagName === 'A' && (key.startsWith('send_') || key.startsWith('download_') || key === 'view_project')) { 
                element.textContent = data[key];
            } else if (element.classList.contains('gitlab-icon-large') || element.classList.contains('linkedin-icon-large')) { 
            } else if (key === 'about_text') {
                element.innerHTML = data[key].replace(/\n/g, '<br>');
            } else {
               element.textContent = data[key];
            }
        }
    });
    typedWords = data["typed_words"] || []; 
    document.querySelectorAll('.lang-switcher button').forEach(button => {
        button.classList.remove('active');
        if (button.getAttribute('data-lang') === lang) {
            button.classList.add('active');
        }
    });
    currentLang = lang;
    const titleElement = document.querySelector('.typed-title');
    if (titleElement) {
        if (typeof typeWriterTimeout !== 'undefined') {
            clearTimeout(typeWriterTimeout);
        }
        wordIndex = 0;
        charIndex = 0;
        isDeleting = false;
        if(typedTextElement) typedTextElement.textContent = ''; 
        setTimeout(typeWriter, 100); 
    }
}

document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.lang-switcher button').forEach(button => {
        button.addEventListener('click', () => {
            const lang = button.getAttribute('data-lang');
            setLanguage(lang);
        });
    });
    setLanguage(currentLang);
});

const canvas = document.getElementById('bg-canvas');
const ctx = canvas.getContext('2d');
let particles = [];

function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resizeCanvas();

let resizeTimer;
window.addEventListener('resize', () => {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(() => {
        resizeCanvas();
        initParticles();
    }, 250); 
});

class Particle {
    constructor() {
        this.x = Math.random() * canvas.width;
        this.y = Math.random() * canvas.height;
        this.size = Math.random() * 3 + 1;
        this.speedX = Math.random() * 0.5 - 0.25;
        this.speedY = Math.random() * 0.5 - 0.25;
    }
    update() {
        this.x += this.speedX;
        this.y += this.speedY;
        if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
        if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
    }
    draw() {
        ctx.fillStyle = 'rgba(67, 97, 238, 0.4)';
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
    }
}

function initParticles() {
    particles = [];
    const count = window.innerWidth < 768 ? 30 : 60;
    for (let i = 0; i < count; i++) {
        particles.push(new Particle());
    }
}
initParticles();

let lastTime = 0;
const fps = 30;
const interval = 1000 / fps;

function animate(timestamp) {
    requestAnimationFrame(animate);
    const deltaTime = timestamp - lastTime;
    if (deltaTime > interval) {
        lastTime = timestamp - (deltaTime % interval);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => { p.update(); p.draw(); });
    }
}
animate(0);

function typeWriter() {
    if (typedWords.length === 0 || !typedTextElement) {
        typeWriterTimeout = setTimeout(typeWriter, 100);
        return; 
    }
    const currentWord = typedWords[wordIndex];
    if (isDeleting) {
        typedTextElement.textContent = currentWord.substring(0, charIndex - 1);
        charIndex--;
    } else {
        typedTextElement.textContent = currentWord.substring(0, charIndex + 1);
        charIndex++;
    }
    if (!isDeleting && charIndex === currentWord.length) {
        typeWriterTimeout = setTimeout(() => { isDeleting = true; }, pauseBetweenWords);
    } else if (isDeleting && charIndex === 0) {
        isDeleting = false;
        wordIndex = (wordIndex + 1) % typedWords.length;
    }
    typeWriterTimeout = setTimeout(typeWriter, isDeleting ? typingSpeed / 2 : typingSpeed);
    const navToggle = document.getElementById('nav-toggle');
    const navLinks = document.querySelectorAll('.nav-menu a');
    function closeMenu() {
        if (navToggle && navToggle.checked) {
            navToggle.checked = false;
            document.body.style.overflow = 'auto'; 
        }
    }
    navLinks.forEach(link => {
        link.addEventListener('click', closeMenu);
    });
}
